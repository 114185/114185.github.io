<!DOCTYPE html>
<html>
  <head>
    <title>hello world</title>
    <link rel="icon" href="index.html">
  </head>
  <body>
    hello world
 </body>
</html>
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>å°é­šå¤§å†’éšª åœ–ç‰‡ç‰ˆ</title>
<style>
    body {
        margin: 0;
        overflow: hidden;
        background: #003d66;
        font-family: Arial, sans-serif;
    }
    canvas {
        display: block;
    }
    #startScreen {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 50, 0.6);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        color: white;
        font-size: 40px;
    }
    #startBtn {
        font-size: 28px;
        padding: 15px 40px;
        border: none;
        border-radius: 10px;
        background: #ff6666;
        color: white;
        cursor: pointer;
        margin-top: 20px;
    }
    #scoreDisplay {
        position: absolute;
        top: 20px;
        right: 20px;
        color: white;
        font-size: 30px;
    }
</style>
</head>
<body>

<canvas id="game"></canvas>

<div id="startScreen">
    <div>ğŸŸ å°é­šå¤§å†’éšªï¼ˆåœ–ç‰‡ç‰ˆï¼‰ ğŸŸ</div>
    <button id="startBtn">é–‹å§‹éŠæˆ²</button>
</div>

<div id="scoreDisplay">åˆ†æ•¸ï¼š0</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let keys = {};
let gameStarted = false;
let score = 0;

// ----------------------------------------------------
// âœ¦ è¼‰å…¥åœ–ç‰‡
// ----------------------------------------------------
const fishImg = new Image();
fishImg.src = "fish.png";

const piranhaImg = new Image();
piranhaImg.src = "piranha.png";

const coralImg = new Image();
coralImg.src = "coral.png";

const bgImg = new Image();
bgImg.src = "bg.png";

// ----------------------------------------------------
// âœ¦ ç©å®¶å°é­š
// ----------------------------------------------------
const fish = {
    x: 200,
    y: canvas.height / 2,
    width: 70,
    height: 50,
    speed: 5
};

// ----------------------------------------------------
// âœ¦ å¤šéš»é£Ÿäººé­š
// ----------------------------------------------------
let piranhas = [];
let piranhaBaseSpeed = 2;
let piranhaAccel = 0.002;

function spawnPiranhas() {
    piranhas = [];
    let count = 20;

    for (let i = 0; i < count; i++) {
        piranhas.push({
            x: Math.random() * (canvas.width * 0.4),
            y: Math.random() * canvas.height,
            width: 60,
            height: 45,
            speed: piranhaBaseSpeed + Math.random()
        });
    }
}

// ----------------------------------------------------
// âœ¦ çŠç‘šç¤ï¼ˆä½¿ç”¨åœ–ç‰‡ï¼‰
// ----------------------------------------------------
let obstacles = [];

function spawnObstacle() {
    let fromTop = Math.random() < 0.5;

    let minHeight = 80;
    let maxHeight = canvas.height * 0.6;
    let height = minHeight + Math.random() * (maxHeight - minHeight);

    obstacles.push({
        x: canvas.width,
        y: fromTop ? 0 : canvas.height - height,
        width: 90,
        height: height,
        speed: 4
    });
}

setInterval(() => {
    if (gameStarted) spawnObstacle();
}, 1700);

// ----------------------------------------------------
// âœ¦ ä¸»è¿´åœˆ
// ----------------------------------------------------
function gameLoop() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    if (bgImg.complete) {
        ctx.drawImage(bgImg, 0, 0, canvas.width, canvas.height);
    }

    if (gameStarted) {
        moveFish();
        movePiranhas();
        moveObstacles();
        drawFish();
        drawPiranhas();
        drawObstacles();
        updateScore();
        checkCollision();
    }

    requestAnimationFrame(gameLoop);
}

// ----------------------------------------------------
// âœ¦ ç§»å‹•é‚è¼¯
// ----------------------------------------------------
function moveFish() {
    if (keys["ArrowUp"]) fish.y -= fish.speed;
    if (keys["ArrowDown"]) fish.y += fish.speed;
    if (keys["ArrowLeft"]) fish.x -= fish.speed;
    if (keys["ArrowRight"]) fish.x += fish.speed;

    fish.x = Math.max(0, Math.min(canvas.width - fish.width, fish.x));
    fish.y = Math.max(0, Math.min(canvas.height - fish.height, fish.y));
}

function movePiranhas() {
    piranhas.forEach(p => {
        p.speed += piranhaAccel;

        if (p.x < fish.x - 50) p.x += p.speed;
        if (p.y < fish.y) p.y += 1.1;
        if (p.y > fish.y) p.y -= 1.1;
    });
}

function moveObstacles() {
    obstacles.forEach(o => o.x -= o.speed);
    obstacles = obstacles.filter(o => o.x + o.width > 0);
}

// ----------------------------------------------------
// âœ¦ ç¹ªåœ–
// ----------------------------------------------------
function drawFish() {
    ctx.drawImage(fishImg, fish.x, fish.y, fish.width, fish.height);
}

function drawPiranhas() {
    piranhas.forEach(p => {
        ctx.drawImage(piranhaImg, p.x, p.y, p.width, p.height);
    });
}

function drawObstacles() {
    obstacles.forEach(o => {
        ctx.drawImage(coralImg, o.x, o.y, o.width, o.height);
    });
}

// ----------------------------------------------------
// âœ¦ å¾—åˆ†
// ----------------------------------------------------
function updateScore() {
    score += 0.1;
    document.getElementById("scoreDisplay").innerText =
        "åˆ†æ•¸ï¼š" + Math.floor(score);
}

// ----------------------------------------------------
// âœ¦ ç¢°æ’åˆ¤å®šï¼ˆæ”¹æˆåœ–ç‰‡å¤§å°ï¼‰
// ----------------------------------------------------
function checkCollision() {

    // é£Ÿäººé­š
    piranhas.forEach(p => {
        if (
            fish.x < p.x + p.width &&
            fish.x + fish.width > p.x &&
            fish.y < p.y + p.height &&
            fish.y + fish.height > p.y
        ) {
            gameOver("è¢«é£Ÿäººé­šæŠ“åˆ°äº†ï¼");
        }
    });

    // çŠç‘š
    obstacles.forEach(o => {
        if (
            fish.x < o.x + o.width &&
            fish.x + fish.width > o.x &&
            fish.y < o.y + o.height &&
            fish.y + fish.height > o.y
        ) {
            gameOver("æ’åˆ°çŠç‘šç¤äº†ï¼");
        }
    });
}

function gameOver(msg) {
    alert(msg + "\næœ€çµ‚åˆ†æ•¸ï¼š" + Math.floor(score));
    location.reload();
}

// ----------------------------------------------------
// âœ¦ é–‹å§‹éŠæˆ²
// ----------------------------------------------------
document.getElementById("startBtn").onclick = () => {
    document.getElementById("startScreen").style.display = "none";
    gameStarted = true;
    spawnPiranhas();
};

document.addEventListener("keydown", e => keys[e.key] = true);
document.addEventListener("keyup", e => delete keys[e.key]);

gameLoop();
</script>
</body>
</html>
