<!DOCTYPE html>
<html>
  <head>
    <title>hello world</title>
    <link rel="icon" href="index.html">
  </head>
  <body>
    hello world
 </body>
</html>
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>å°é­šå¤§å†’éšª åœ–ç‰‡ç‰ˆ</title>
<style>
    body { margin: 0; overflow: hidden; background: #003d66; }
    canvas { display: block; }
    #startScreen {
        position: absolute; top: 0; left: 0; width: 100%; height: 100%;
        background: rgba(0, 0, 50, 0.6);
        display: flex; flex-direction: column;
        align-items: center; justify-content: center;
        color: white; font-size: 40px;
    }
    #startBtn {
        padding: 12px 35px; background: #ff6666;
        border-radius: 10px; border: none;
        color: white; cursor: pointer; font-size: 30px;
    }
    #score {
        position: absolute; top: 20px; right: 20px;
        color: white; font-size: 30px;
    }
</style>
</head>
<body>

<canvas id="game"></canvas>
<div id="startScreen">
    ğŸŸ å°é­šå¤§å†’éšªï¼ˆåœ–ç‰‡ç‰ˆï¼‰ ğŸŸ
    <button id="startBtn">é–‹å§‹éŠæˆ²</button>
</div>
<div id="score">åˆ†æ•¸ï¼š0</div>

<script>
// === Canvas ===
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let keys = {};
let started = false;
let score = 0;

// === è¼‰å…¥åœ–ç‰‡ ===
const fishImg = new Image(); fishImg.src = "fish.png";
const piranhaImg = new Image(); piranhaImg.src = "piranha.png";
const coralImg = new Image(); coralImg.src = "coral.png";
const bgImg = new Image(); bgImg.src = "bg.png";

// === ç©å®¶å°é­š ===
const fish = {
    x: 200,
    y: canvas.height / 2,
    width: 70,
    height: 50,
    speed: 5
};

// === å¤šéš»é£Ÿäººé­š ===
let piranhas = [];
let piranhaAccel = 0.002;

function spawnPiranhas() {
    piranhas = [];
    for (let i = 0; i < 20; i++) {
        piranhas.push({
            x: Math.random() * (canvas.width * 0.4),
            y: Math.random() * canvas.height,
            width: 60,
            height: 45,
            speed: 2 + Math.random()
        });
    }
}

// === çŠç‘šç¤ ===
let corals = [];

function spawnCoral() {
    let top = Math.random() < 0.5;
    let minH = 80, maxH = canvas.height * 0.6;
    let h = minH + Math.random() * (maxH - minH);

    corals.push({
        x: canvas.width,
        y: top ? 0 : canvas.height - h,
        width: 90,
        height: h,
        speed: 4
    });
}

setInterval(() => { if (started) spawnCoral(); }, 1700);

// === controls ===
document.addEventListener("keydown", e => keys[e.key] = true);
document.addEventListener("keyup", e => delete keys[e.key]);

// === å°é­šç§»å‹• + ç¢°æ’é˜»æ“‹ï¼ˆä¸èƒ½ç©¿éçŠç‘šç¤ï¼‰ ===
function moveFish() {
    let oldX = fish.x;
    let oldY = fish.y;

    if (keys["ArrowUp"]) fish.y -= fish.speed;
    if (keys["ArrowDown"]) fish.y += fish.speed;
    if (keys["ArrowLeft"]) fish.x -= fish.speed;
    if (keys["ArrowRight"]) fish.x += fish.speed;

    fish.x = Math.max(0, Math.min(canvas.width - fish.width, fish.x));
    fish.y = Math.max(0, Math.min(canvas.height - fish.height, fish.y));

    // --- çŠç‘šé˜»æ“‹ç©å®¶ ---
    for (let c of corals) {
        if (
            fish.x < c.x + c.width &&
            fish.x + fish.width > c.x &&
            fish.y < c.y + c.height &&
            fish.y + fish.height > c.y
        ) {
            // å›åˆ°ç§»å‹•å‰ä½ç½®
            fish.x = oldX;
            fish.y = oldY;
        }
    }
}

// === é£Ÿäººé­šè¿½æ“Š ===
function movePiranhas() {
    piranhas.forEach(p => {
        p.speed += piranhaAccel;
        if (p.x < fish.x - 30) p.x += p.speed;
        if (p.y < fish.y) p.y += 1.2;
        if (p.y > fish.y) p.y -= 1.2;
    });
}

// === çŠç‘šç¤ç§»å‹• ===
function moveCorals() {
    corals.forEach(c => c.x -= c.speed);
    corals = corals.filter(c => c.x + c.width > 0);
}

// === ç¹ªè£½ ===
function drawFish() {
    ctx.drawImage(fishImg, fish.x, fish.y, fish.width, fish.height);
}

function drawPiranhas() {
    for (let p of piranhas) {
        ctx.drawImage(piranhaImg, p.x, p.y, p.width, p.height);
    }
}

function drawCorals() {
    for (let c of corals) {
        ctx.drawImage(coralImg, c.x, c.y, c.width, c.height);
    }
}

// === é£Ÿäººé­šç¢°æ’ â†’ éŠæˆ²çµæŸ ===
function checkGameOver() {
    for (let p of piranhas) {
        if (
            fish.x < p.x + p.width &&
            fish.x + fish.width > p.x &&
            fish.y < p.y + p.height &&
            fish.y + fish.height > p.y
        ) {
            alert("è¢«é£Ÿäººé­šå’¬åˆ°äº†ï¼\nåˆ†æ•¸ï¼š" + Math.floor(score));
            location.reload();
        }
    }
}

// === éŠæˆ²ä¸»è¿´åœˆ ===
function loop() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    if (bgImg.complete) ctx.drawImage(bgImg, 0, 0, canvas.width, canvas.height);

    if (started) {
        moveFish();
        movePiranhas();
        moveCorals();

        drawFish();
        drawPiranhas();
        drawCorals();

        score += 0.1;
        document.getElementById("score").innerHTML = "åˆ†æ•¸ï¼š" + Math.floor(score);

        checkGameOver();
    }
    requestAnimationFrame(loop);
}

// === é–‹å§‹ ===
document.getElementById("startBtn").onclick = () => {
    document.getElementById("startScreen").style.display = "none";
    started = true;
    spawnPiranhas();
};

loop();
</script>
</body>
</html>
